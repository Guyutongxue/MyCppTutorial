# 再谈作用域

## main 函数

聪明的你可能已经发现，我们第一章、第二章写的代码一直都写在
```cpp
int main() {
    // 这里面
}
```
这样一个东西里面。然而这个东西实际上长得很像一个函数定义——一个返回值为 `int`、同时不接收任何参数的名为 `main` 的函数。没错，这个东西的的确确是一个函数，被称为 **main 函数**（或称主函数）。

**main 函数规定了 C++ 程序执行的入口。**请这样想，所有的函数都代表了一个过程，同时整个程序本身也是一个过程；因而整个程序也可以用一个函数来表达。这个函数就是 main 函数了。当编译、运行一段 C++ 代码时，计算机会首先从 main 函数执行；如果 main 函数执行完毕，则整个程序就执行完毕退出。

**C++ 标准规定 main 函数的返回值必须为 `int` 类型。** main 函数的返回值的意义我们目前没有必要掌握，只需了解以下事实：若 main 函数的返回值为 `0`，则代表程序正常完成工作并正常退出；若非 `0`，则代表因发生了意外状况而退出。因此你会在许多其它书的样例程序中见到这样的代码：
```cpp
int main() {
    // other code...
    return 0;
}
```
它的含义就是代表程序将正常退出。但为什么我们一直没有写 `return 0;` 这条语句呢？因为 C++ 标准特别地允许 main 函数无需 return 语句。当 main 函数执行到函数体结尾却没有遇到 return 时，将自动地执行 `return 0;`。所以说在一般情形下，main 函数结尾可以省去 return 。

## 函数作用域

我们一直以来都将变量定义在函数的函数体里。要么是 main 函数，要么是其它自己定义的函数。因此这些变量的名字的作用域只停留在函数体内部；到了函数体结尾的 `}` 就无法再使用了。请看下例：
```cpp
#include <iostream>
using namespace std;
int getInput() {
    int n; // 变量名 n 的作用域开始（声明点）
    cin >> n;
    return n;
} // 变量名 n 的作用域结束
int main() {
    // 这里显然不能再使用 getInput 函数里的变量了
    int x{getInput()}; // 变量名 x 的作用域开始
    cout << x << endl;
} // 变量名 x 的作用域结束
```

所以我们做不到只通过这种形式让一个变量贯穿多个函数。比如：
```cpp
#include <iostream>
```

## 全局作用域

整个 C++ 代码最顶层的作用域被称为全局命名空间作用域（Global namespace scope），简称**全局作用域**。比如 main 函数就定义在全局作用域内。